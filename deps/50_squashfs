#!/bin/sh
#SOURCE: https://downloads.sourceforge.net/project/squashfs/squashfs/squashfs4.4/squashfs4.4.tar.gz
#FILE: squashfs4.4.tar.gz
#HASH: a42fdedb8a1543274592e317c437cafa54e02705

set -e
#set -x

build()
{
  tar --strip-components=1 -xzf $1
  sed s/'#XZ_SUPPORT = 1'/'XZ_SUPPORT = 1'/ -i squashfs-tools/Makefile
  if [ "x$3" = "xx86_64" ]
  then
    make -C squashfs-tools $4
  elif [ "x$3" = "xarm" ]
  then
    make CC=arm-linux-gnueabihf-gcc -C squashfs-tools $4
  elif [ "x$3" = "xarm64" ]
  then
    make CC=aarch64-linux-gnu-gcc -C squashfs-tools $4
  fi
}

install()
{
  cp -f $3/squashfs-tools/unsquashfs $1/bin/
  cp -f $3/squashfs-tools/mksquashfs $1/bin/
}

binaries()
{
  ls $1/bin/*squashfs
}
