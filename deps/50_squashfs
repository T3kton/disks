#!/bin/sh
#SOURCE: https://downloads.sourceforge.net/project/squashfs/squashfs/squashfs4.6.1/squashfs4.6.1.tar.gz
#HASH: daad956aa77ccddf5df20db6a2eebcc4a226cab5

set -e
#set -x

build()
{
  tar --strip-components=1 -xzf $1
  sed s/'#XZ_SUPPORT = 1'/'XZ_SUPPORT = 1'/ -i squashfs-tools/Makefile
  if [ "x$2" = "xx86_64" ]
  then
    make -C squashfs-tools $3
  elif [ "x$2" = "xarm" ]
  then
    make CC=arm-linux-gnueabihf-gcc -C squashfs-tools $3
  elif [ "x$2" = "xarm64" ]
  then
    make CC=aarch64-linux-gnu-gcc -C squashfs-tools $3
  fi
}

install()
{
  cp -f $3/squashfs-tools/unsquashfs $1/bin/
  cp -f $3/squashfs-tools/mksquashfs $1/bin/
}

binaries()
{
  ls $1/bin/*squashfs
}
