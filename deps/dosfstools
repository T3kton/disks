#!/bin/sh
#SOURCE: https://github.com/dosfstools/dosfstools/releases/download/v4.1/dosfstools-4.1.tar.xz
#FILE: dosfstools-4.1.tar.xz
#HASH: 814e2d5842c62e328dfc8947178a0a4e45a1c028

set -e
set -x

build()
{
  tar --strip-components=1 -xJf $1
  if [ "x$2" = "xx86_64" ]
  then
    ./configure --prefix=
  elif [ "x$2" = "xarm" ]
  then
    ./configure --prefix= --host arm-linux-gnueabihf --build x86_64-pc-linux-gnu
  elif [ "x$2" = "xarm64" ]
  then
    ./configure --prefix= --host aarch64-linux-gnu --build x86_64-pc-linux-gnu
  fi
  make
}

install()
{
  cp -f $3/src/fsck.fat $1/sbin
  ln -sf fsck.fat $1/sbin/fsck.vfat
  ln -sf fsck.fat $1/sbin/fsck.msdos
  cp -f $3/src/mkfs.fat $1/sbin
  ln -sf mkfs.fat $1/sbin/mkfs.vfat
  ln -sf mkfs.fat $1/sbin/mkfs.msdos
}


binaries()
{
  ls $1/sbin/fsck.fat
  ls $1/sbin/mkfs.fat
}
