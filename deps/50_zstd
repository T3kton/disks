#!/bin/sh
#SOURCE: https://github.com/facebook/zstd/releases/download/v1.5.6/zstd-1.5.6.tar.gz
#HASH: 459ab8de8c24fc3ce648a35a07b31fcd6616ade2

set -e
#set -x

build()
{
  tar --strip-components=1 -xzf $1
  if [ "x$2" = "xx86_64" ]
  then
    make $3
  elif [ "x$2" = "xarm" ]
  then
    make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- $3
  elif [ "x$2" = "xarm64" ]
  then
    make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- $3
  fi
}

install()
{
  cp -f $3/programs/zstd $1/bin/
  cp -f $3/programs/zstdgrep $1/bin/
  cp -f $3/programs/zstdless $1/bin/
  ln -sf zstd $1/bin/zstdcat
  ln -sf zstd $1/bin/unzstd
  ln -sf zstd $1/bin/zstdmt
}

binaries()
{
  ls $1/bin/zstd
  ls $1/bin/zstdgrep
  ls $1/bin/zstdless
}
