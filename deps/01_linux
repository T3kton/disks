#!/bin/sh
#SOURCE: https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-4.19.128.tar.xz
#FILE: linux-4.19.128.tar.xz
#HASH: a96add8134be86baa5c91f9bcca505bd4d647f22

set -e
#set -x

build()
{
  tar --strip-components=1 -xJf $1
  if [ "x$2" = "xx86_64" ]
  then
    cp ../../configs/linux.x86_64 .config
    make $3
    make modules $3
  elif [ "x$2" = "xarm" ]
  then
    cp ../../configs/linux.arm .config
    make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- $3
    make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- modules $3
  elif [ "x$2" = "xarm64" ]
  then
    cp ../../configs/linux.arm64 .config
    make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- $3
    make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- modules $3
  fi
}
