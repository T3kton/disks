#!/bin/sh
#SOURCE: https://media.luffy.cx/files/lldpd/lldpd-0.9.9.tar.gz
#FILE: lldpd-0.9.9.tar.gz
#HASH: 681ef98485d553332979472544220b84e37934a0

set -e
#set -x

build()
{
  tar --strip-components=1 -xzf $1
  if [ "x$2" = "xx86_64" ]
  then
    ./configure --with-json --with-privsep-user=root --with-privsep-group=root --with-privsep-chroot=/ --prefix=/
  elif [ "x$2" = "xarm" ]
  then
    ./configure --with-json --with-privsep-user=root --with-privsep-group=root --with-privsep-chroot=/ --prefix=/ --host arm-linux-gnueabihf --build x86_64-pc-linux-gnu
  elif [ "x$2" = "xarm64" ]
  then
    ./configure --with-json --with-privsep-user=root --with-privsep-group=root --with-privsep-chroot=/ --prefix=/ --host aarch64-linux-gnu --build x86_64-pc-linux-gnu
  fi
  make
}

install()
{
  cp -f $3/src/client/.libs/lldpcli $1/sbin
  cp -f $3/src/daemon/lldpd $1/sbin
  cp -f $3/src/lib/.libs/liblldpctl.so.4.8.0 $1/lib
}


binaries()
{
  ls $1/sbin/lldp*
  ls $1/lib/liblldpctl.so*
}
