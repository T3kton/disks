#!/bin/sh
#SOURCE: https://gnupg.org/ftp/gcrypt/gpgrt/libgpg-error-1.43.tar.bz2
#FILE: libgpg-error-1.43.tar.bz2
#HASH: e71b77e8e32023dfd9cb06504942aa8e028c8795

set -e
#set -x

build()
{
  tar --strip-components=1 -xjf $1
  if [ "x$3" = "xx86_64" ]
  then
    ./configure --prefix= --disable-doc
  elif [ "x$3" = "xarm" ]
  then
    ./configure --prefix= --disable-doc --host arm-linux-gnueabihf --build x86_64-pc-linux-gnu
  elif [ "x$3" = "xarm64" ]
  then
    ./configure --prefix= --disable-doc --host aarch64-linux-gnu --build x86_64-pc-linux-gnu
  fi
  make $4
  mkdir -p lib/pkgconfig
  ln -s ../../src/gpg-error.pc lib/pkgconfig/
}

install()
{
  cp -f $3/src/.libs/libgpg-error.so.0.32.1 $1/lib
}

binaries()
{
  ls $1/lib/libgpg-error.so*
}

# only used by gpgv
