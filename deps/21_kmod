#!/bin/sh
#SOURCE: https://www.kernel.org/pub/linux/utils/kernel/kmod/kmod-27.tar.xz
#FILE: kmod-27.tar.xz
#HASH: 2c5d55ffe3a83e9de70bb3419fb1a2887489a65f

set -e
#set -x

build()
{
  tar --strip-components=1 -xJf $1
  if [ "x$3" = "xx86_64" ]
  then
    ./configure --prefix=/ --with-xz --with-zlib
  elif [ "x$3" = "xarm" ]
  then
    ./configure --prefix=/ --with-xz --with-zlib --host arm-linux-gnueabihf --build x86_64-pc-linux-gnu
  elif [ "x$3" = "xarm64" ]
  then
    ./configure --prefix=/ --with-xz --with-zlib --host aarch64-linux-gnu --build x86_64-pc-linux-gnu
  fi
  make $4

  DESTDIR=$2 make install
}

install()
{
  : # just here for linking against
}
