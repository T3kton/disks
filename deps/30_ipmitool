#!/bin/sh
#SOURCE: https://github.com/ipmitool/ipmitool/archive/refs/tags/IPMITOOL_1_8_19.tar.gz
#HASH: 92620c40a0f2d5fbe72e774385a55a53aa4ec448

set -e
#set -x

build()
{
  tar --strip-components=1 -xzf $1
	./bootstrap
  if [ "x$2" = "xx86_64" ]
  then
    ./configure --prefix= --enable-intf-lanplus --enable-intf-open --disable-intf-serial --disable-solaris-opt --disable-intf-lan --disable-intf-usb --disable-intf-free --disable-intf-imb --disable-intf-lipmi --disable-intf-bmc --disable-intf-dummy --disable-ipmishell
  elif [ "x$2" = "xarm" ]
  then
    ./configure --prefix= --enable-intf-lanplus --enable-intf-open --disable-intf-serial --disable-solaris-opt --disable-intf-lan --disable-intf-usb --disable-intf-free --disable-intf-imb --disable-intf-lipmi --disable-intf-bmc --disable-intf-dummy --disable-ipmishell --host arm-linux-gnueabihf --build x86_64-pc-linux-gnu
  elif [ "x$2" = "xarm64" ]
  then
    ./configure --prefix= --enable-intf-lanplus --enable-intf-open --disable-intf-serial --disable-solaris-opt --disable-intf-lan --disable-intf-usb --disable-intf-free --disable-intf-imb --disable-intf-lipmi --disable-intf-bmc --disable-intf-dummy --disable-ipmishell --host aarch64-linux-gnu --build x86_64-pc-linux-gnu
  fi

  #make $3
}

install()
{
  cp -f $3/src/ipmitool $1/bin
}

binaries()
{
  ls $1/bin/ipmitool
}
