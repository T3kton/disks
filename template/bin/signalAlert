#!/usr/bin/python -u

import sys
import os

from platopxe.libplatopxe import PlatoPXE, PlatoPxeNoJobException

try:
  msg = sys.argv[ 1 ]
except KeyError:
  print 'usage: %s <message>' % sys.argv[ 0 ]

platopxe = PlatoPXE( host=os.environ.get( 'plato_host', 'http://plato' ), proxy=os.environ.get( 'plato_proxy', None ) )

try:
  platopxe.signalAlert( msg )
except PlatoPxeNoJobException:
  print 'WARNING! No Job, aborting.'

sys.exit( 0 )
